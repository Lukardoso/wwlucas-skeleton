import profile from "@/routes/profile";
import { Link, usePage } from "@inertiajs/react";
import { SVGAttributes } from "react";

type User = {
    name: string,
    avatar?: string,
}

export default function ProfileMenu() {
    const user = usePage<{ auth: { user: User } }>().props.auth.user;
    const splittedName = user.name.split(' ');

    return (
        <Link href={profile.edit().url} className="grid place-items-center">
            {user.avatar
                ? <img className="h-10 w-10 overflow-hidden rounded-full" src={user.avatar} alt={user.name} />
                : <AvatarFallback className="h-10 w-10 fill-white" />
            }

            <p className="text-xs">{`${splittedName[0]} ${splittedName.at(-1)}`}</p>
        </Link>
    );
}

function AvatarFallback(props: SVGAttributes<SVGElement>) {
    return (
        <svg {...props} viewBox="0 0 29 29" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.5071 23.4297C6.52439 22.1167 7.05796 20.8633 7.99236 19.9407C8.92676 19.018 10.1869 18.5004 11.5 18.4997H17.5C18.8131 18.5004 20.0732 19.0181 21.0076 19.9407C21.942 20.8633 22.4756 22.1167 22.4929 23.4297C20.2997 25.406 17.4522 26.4997 14.5 26.4997C11.5478 26.4997 8.70024 25.406 6.5071 23.4297ZM19 10.9997C19 11.8898 18.7361 12.7598 18.2416 13.4998C17.7471 14.2398 17.0443 14.8166 16.2221 15.1572C15.3998 15.4978 14.495 15.5869 13.6221 15.4133C12.7492 15.2396 11.9474 14.8111 11.318 14.1817C10.6887 13.5524 10.2601 12.7506 10.0865 11.8776C9.91283 11.0047 10.0019 10.0999 10.3425 9.27767C10.6831 8.4554 11.2599 7.75259 11.9999 7.25813C12.74 6.76366 13.61 6.49974 14.5 6.49974C15.6935 6.49974 16.8381 6.97385 17.682 7.81776C18.5259 8.66167 19 9.80627 19 10.9997Z" />
            <path d="M25.2489 23.4297C26.6846 21.7019 27.6831 19.6536 28.1599 17.4583C28.6367 15.2629 28.5778 12.9851 27.9881 10.8173C27.3984 8.64955 26.2953 6.6557 24.7721 5.00439C23.249 3.35308 21.3505 2.09289 19.2373 1.33041C17.1242 0.567923 14.8585 0.325577 12.6318 0.623868C10.4052 0.922158 8.28314 1.75231 6.44517 3.04411C4.6072 4.3359 3.10737 6.05135 2.07254 8.04534C1.03772 10.0393 0.498328 12.2532 0.500004 14.4997C0.500787 17.7659 1.65181 20.9275 3.7511 23.4297L3.7311 23.4463C3.8011 23.5308 3.8811 23.603 3.9533 23.6855C4.0433 23.7891 4.1397 23.8855 4.2333 23.9863C4.5133 24.2896 4.8007 24.5815 5.1033 24.8563C5.1948 24.9394 5.2897 25.0175 5.3833 25.098C5.7033 25.3739 6.0317 25.6352 6.3733 25.8793C6.4174 25.9105 6.4565 25.9486 6.5009 25.9799V25.9672C8.84301 27.6154 11.637 28.4999 14.5009 28.4999C17.3648 28.4999 20.1588 27.6154 22.5009 25.9672V25.9797C22.5453 25.9484 22.5844 25.9103 22.6285 25.8791C22.9697 25.635 23.2985 25.3737 23.6185 25.0978C23.7121 25.0178 23.807 24.9392 23.8985 24.8561C24.201 24.5812 24.4885 24.2893 24.7685 23.9861C24.8618 23.8855 24.9579 23.7889 25.0485 23.6853C25.1204 23.6028 25.2007 23.5306 25.2707 23.4461L25.2489 23.4297ZM14.5 6.49974C15.39 6.49974 16.26 6.76366 17.0001 7.25813C17.7401 7.75259 18.3169 8.4554 18.6575 9.27767C18.9981 10.0999 19.0872 11.0047 18.9135 11.8776C18.7399 12.7506 18.3113 13.5524 17.682 14.1817C17.0526 14.8111 16.2508 15.2396 15.3779 15.4133C14.505 15.5869 13.6002 15.4978 12.7779 15.1572C11.9557 14.8166 11.2529 14.2398 10.7584 13.4998C10.2639 12.7598 10 11.8898 10 10.9997C10 9.80627 10.4741 8.66167 11.318 7.81776C12.1619 6.97385 13.3065 6.49974 14.5 6.49974ZM6.5071 23.4297C6.52437 22.1167 7.05794 20.8633 7.99234 19.9406C8.92675 19.018 10.1869 18.5004 11.5 18.4997H17.5C18.8131 18.5004 20.0732 19.018 21.0076 19.9407C21.942 20.8633 22.4756 22.1167 22.4929 23.4297C20.2998 25.406 17.4522 26.4997 14.5 26.4997C11.5478 26.4997 8.70025 25.406 6.5071 23.4297Z" fill="#949494" />
        </svg>
    )
}